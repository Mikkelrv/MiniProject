@page "/listings"
@inject HttpClient Http
@inject NavigationManager navManager
@inject ILoginService loginService
<SearchComponent></SearchComponent>
<DisplayAllItemsComponent items="@_items"/>
<ImgurUploadComponent/>


@code {

	private User? _user;
	private List<Item> _items = new();
	private Filter _filter;

    protected override async Task OnInitializedAsync()
    {
        _user = await loginService.GetUserLoggedIn();
        if (_user is null)
            navManager.NavigateTo("login/listings");

		_items = await Http.GetFromJsonAsync<List<Item>>($"https://localhost:7077/api/items/get/all?filter={_filter}");
    }
}
